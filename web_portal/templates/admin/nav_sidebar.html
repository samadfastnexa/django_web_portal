{% load i18n %}
{% load static %}
{% load admin_extras %}
<style>
  /* Modern Sidebar Icon Styling */
  .menu-icon { display: inline-flex; align-items: center; justify-content: center; width: 24px; height: 24px; flex-shrink: 0; }
  .menu-icon svg { width: 100%; height: 100%; transition: all 0.25s ease; color: #E26830; filter: drop-shadow(0 0 0.5px rgba(226, 104, 48, 0.3)); }
  .menu-link:hover .menu-icon svg { color: #FF6B3D; transform: scale(1.2); filter: drop-shadow(0 0 3px rgba(226, 104, 48, 0.5)); }
  .menu-item.is-active .menu-icon svg { color: #FF6B3D; font-weight: 700; filter: drop-shadow(0 0 3px rgba(255, 107, 61, 0.6)); }
  
  /* Color variations for different sections */
  #nav-sidebar-models > li:nth-child(3) ~ li:has(svg[viewBox]) .menu-icon svg { color: #2563EB; }
  #nav-sidebar-models > li:nth-child(3) ~ li:has(svg[viewBox]) .menu-link:hover .menu-icon svg { color: #3B82F6; }
  
  #nav-sidebar-models > li:nth-child(8) ~ li:has(svg[viewBox]) .menu-icon svg { color: #059669; }
  #nav-sidebar-models > li:nth-child(8) ~ li:has(svg[viewBox]) .menu-link:hover .menu-icon svg { color: #10B981; }
  
  .sidebar-brand {
    background: linear-gradient(135deg, #E26830, #d65a2b);
    padding: 16px 18px;
    border-radius: 14px;
    margin: 8px 12px 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 12px 30px rgba(226, 104, 48, 0.25);
  }
  .brand-avatar {
    width: 46px;
    height: 46px;
    border-radius: 12px;
    background: linear-gradient(145deg, #fff5ed, #ffe4d5);
    color: #e0642e;
    font-weight: 800;
    font-size: 22px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 2px 6px rgba(255, 255, 255, 0.7), 0 6px 18px rgba(0, 0, 0, 0.12);
  }
  .brand-info { color: #fff; line-height: 1.2; }
  .brand-name { font-weight: 800; font-size: 18px; letter-spacing: 0.3px; }
  .brand-sub { opacity: 0.92; font-weight: 600; }

  .sidebar-search { padding: 0 12px 12px; }
  .search-field {
    display: flex;
    align-items: center;
    gap: 10px;
    background: #f8fafc;
    border: 2px solid #e2e8f0;
    border-radius: 14px;
    padding: 10px 12px;
    box-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);
    transition: all 0.2s ease;
  }
  .search-field:focus-within {
    border-color: #ff7b45;
    box-shadow: 0 14px 30px rgba(226, 104, 48, 0.18);
    transform: translateY(-1px);
  }
  .search-field .icon { width: 18px; height: 18px; color: #c08457; flex-shrink: 0; }
  .search-field input {
    border: none;
    background: transparent;
    width: 100%;
    font-size: 14px;
    color: #0f172a;
    outline: none;
  }
  .search-field input::placeholder { color: #94a3b8; font-weight: 500; }
  .menu-title { margin: 6px 16px 8px; color: #334155; }
  .menu-link { border-radius: 12px; padding: 10px 12px; }
</style>
<nav id="nav-sidebar" aria-label="Sidebar">
  <div class="sidebar-brand">
    <div class="brand-avatar">T</div>
    <div class="brand-info">
      <div class="brand-name">TARZAN</div>
      <div class="brand-sub">Admin</div>
    </div>
  </div>

  <div class="sidebar-search">
    <form action="#" role="search" aria-label="Filter navigation" onsubmit="return false">
      <div class="search-field">
        <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27a6.471 6.471 0 001.57-4.23C15.99 6.01 13.98 4 11.5 4S7.01 6.01 7.01 9.5 9.02 15 11.5 15c1.61 0 3.07-.59 4.2-1.57l.27.28v.79l4.25 4.25 1.5-1.5L15.5 14zm-4 0C9.01 14 7 11.99 7 9.5S9.01 5 11.5 5 16 7.01 16 9.5 13.99 14 11.5 14z"/></svg>
        <input id="nav-filter" name="q" type="text" placeholder="{% translate 'Search here…' %}" autocomplete="off" aria-label="{% translate 'Filter menu' %}">
      </div>
    </form>
  </div>

  <h3 class="menu-title">Main Menu</h3>

  {% get_all_app_list as app_list_all %}
  <ul id="nav-sidebar-models" class="menu-list" data-filterable="true">
    <li class="menu-item {% if request.resolver_match and request.resolver_match.url_name == 'index' %}is-active{% endif %}">
      <a class="menu-link" href="{% url 'admin:index' %}">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
        </span>
        <span class="menu-text">Dashboard</span>
      </a>
    </li>

    <!-- SAP Integration Menu -->
    <li class="menu-item"><span class="menu-text" style="font-weight:700;opacity:.85;">SAP Integration</span></li>
    
    <li class="menu-item {% if '/admin/general-ledger/' in request.path %}is-active{% endif %}">
      <a class="menu-link" href="/admin/general-ledger/">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
        </span>
        <span class="menu-text">General Ledger</span>
      </a>
    </li>
    
    <li class="menu-item {% if '/admin/hana-connect/' in request.path %}is-active{% endif %}">
      <a class="menu-link" href="/admin/hana-connect/">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/></svg>
        </span>
        <span class="menu-text">HANA Connect</span>
      </a>
    </li>
    
    <li class="menu-item {% if '/admin/sap-bp-lookup/' in request.path %}is-active{% endif %}">
      <a class="menu-link" href="/admin/sap-bp-lookup/">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        </span>
        <span class="menu-text">BP Lookup</span>
      </a>
    </li>
    
    <li class="menu-item {% if '/admin/sap-bp-entry/' in request.path %}is-active{% endif %}">
      <a class="menu-link" href="/admin/sap-bp-entry/">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        </span>
        <span class="menu-text">BP Entry</span>
      </a>
    </li>
    
    <li class="menu-item {% if '/admin/sap-sales-order/' in request.path %}is-active{% endif %}">
      <a class="menu-link" href="/admin/sap-sales-order/">
        <span class="menu-icon" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H4c-1.1 0-2 .9-2 2v18h2V4h16v14h2V4c0-1.1-.9-2-2-2zm-2 7h-7v2h7V9zm0 4h-7v2h7v-2z"/></svg>
        </span>
        <span class="menu-text">Sales Order</span>
      </a>
    </li>

    {% if app_list_all %}
      {% for app in app_list_all %}
        {% if app.app_label == 'accounts' %}
          <li class="menu-item"><span class="menu-text" style="font-weight:700;opacity:.85;">{{ app.name }}</span></li>
          {% for model in app.models %}
            {% if model.admin_url %}
              <li class="menu-item {% if request.path == model.admin_url %}is-active{% endif %}">
                <a class="menu-link" href="{{ model.admin_url }}">
                  <span class="menu-icon" aria-hidden="true">
                    {% with n=model.name|lower %}
                      {% if 'user' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                      {% elif 'role' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/><path fill="currentColor" d="M16 10h-3v3h-2v-3h-3v-2h3V5h2v3h3z"/></svg>
                      {% elif 'group' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.89 1.97 1.74 1.97 2.95V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                      {% elif 'permission' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 10l-4-4 1.41-1.41L10 7.17l6.59-6.59L18 2l-8 8z"/></svg>
                      {% else %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6 4h8l5 5v11H6V4zm8 1v4h4"/></svg>
                      {% endif %}
                    {% endwith %}
                  </span>
                  <span class="menu-text">{{ model.name }}</span>
                </a>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if app_list_all %}
      {% for app in app_list_all %}
        {% if app.app_label != 'accounts' and app.app_label != 'crop_management' and app.app_label != 'sap_integration' %}
          <li class="menu-item"><span class="menu-text" style="font-weight:700;opacity:.85;">{{ app.name }}</span></li>
          {% for model in app.models %}
            {% if model.admin_url %}
              <li class="menu-item {% if request.path == model.admin_url %}is-active{% endif %}">
                <a class="menu-link" href="{{ model.admin_url }}">
                  <span class="menu-icon" aria-hidden="true">
                    {% with n=model.name|lower %}
                      {% if 'dealer request' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 5h-2V3h-2v2h-6V3H7v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 14H5V12h14v7zm0-9H5V7h14v3zm-7-1h-2v2h2V9z"/></svg>
                      {% elif 'dealer' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zm-5.5-6c.83 0 1.5-.67 1.5-1.5S15.33 9 14.5 9 13 9.67 13 10.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 9 8.5 9 7 9.67 7 10.5 7.67 12 8.5 12z"/></svg>
                      {% elif 'sales order attachment' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 5.23 11.08 5 12 5c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45c.9-.86 1.48-2.04 1.48-3.36C22.5 12.14 21.35 10.75 19.85 10.24z"/></svg>
                      {% elif 'sales order' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H4c-1.1 0-2 .9-2 2v18h2V4h16v14h2V4c0-1.1-.9-2-2-2zm-2 7h-7v2h7V9zm0 4h-7v2h7v-2z"/></svg>
                      {% elif 'company' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 7V3H2v18h20V7H12zm6 10h-4v4h-4v-4H6v-4h4V9h4v4h4v4z"/></svg>
                      {% elif 'region' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6z"/></svg>
                      {% elif 'zone' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-9-5zm-2 15.5h4v1.5h-4z"/></svg>
                      {% elif 'territor' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21h-4v-1h4v1zm4-4H7V4h8.5v14z"/></svg>
                      {% elif 'complaint' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12h-8v2h8v-2zm0-3h-8v2h8v-2z"/></svg>
                      {% elif 'crop stage' in n and 'image' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zm-10-4l2.5-3.1L17 16H7l4-5z"/></svg>
                      {% elif 'crop stage' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-4V2h-2v2h-4V2h-2v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>
                      {% elif 'trial' in n and 'image' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21h-4v-1h4v1zm4-4H7V4h8.5v14z"/></svg>
                      {% elif 'image' in n or 'images' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
                      {% elif 'pest management' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2c1.1 0 2 .9 2 2v2h5v2h-1.58c.54 1.34.94 2.82.94 4.36 0 .5-.06 1-.16 1.48h4.8v2h-1V18c0 1.1-.9 2-2 2h-1v-2h1v-4h-3.46c-.78 2.11-2.64 3.71-4.54 3.71S7.78 16.11 7 14H3.54v4H4.54v2h-1c-1.1 0-2-.9-2-2v-4h4.8c-.1-.48-.16-.98-.16-1.48 0-1.54.4-3.02.94-4.36H3V8h5V6c0-1.1.9-2 2-2v0m0 6c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z"/></svg>
                      {% elif 'guideline' in n or 'guidelines' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm0-4H8V8h8v2z"/></svg>
                      {% elif 'pest' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6-2c0-.6-.4-1.1-1-1.3l1.2-1.2c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0l-1.2 1.2C14.1 4.4 13.1 4 12 4s-2.1.4-2.9 1.1L7.9 3.9c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4l1.2 1.2c-.6.2-1 .8-1 1.3h12zm-4 10l1-4h-2l1 4zm4-4l1-4h-2l1 4z"/></svg>
                      {% elif 'product' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
                      {% elif 'recommendation' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2l-2.81 6.63L2 9.24l5.46 4.73L5.82 21 12 17.27z"/></svg>
                      {% elif 'crop' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M17.92 7.02C17.45 4.18 14.97 2 12 2c-2.5 0-4.607 1.357-5.740 3.375C4.326 5.637 3 7.657 3 10c0 3.314 2.686 6 6 6h11c2.21 0 4-1.79 4-4 0-2.05-1.53-3.76-3.56-3.97z"/></svg>
                      {% elif 'attendance' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zm-5-6H9v5h5v-5z"/></svg>
                      {% elif 'farmer' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C7.03 2 3 5.25 3 9.5c0 5.63 6.36 10.97 9 13.06 2.64-2.09 9-7.43 9-13.06C21 5.25 16.97 2 12 2zm0 12.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"/></svg>
                      {% elif 'hana' in n or 'connect' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
                      {% elif 'setting' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.62l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.48.1.62l2.03 1.58c-.05.3-.07.62-.07.94 0 .33.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.1.62l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.48-.12-.62l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                      {% elif 'polic' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 10l-4-4 1.41-1.41L10 7.17l6.59-6.59L18 2l-8 8z"/></svg>
                      {% elif 'role' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/><path fill="currentColor" d="M16 10h-3v3h-2v-3h-3v-2h3V5h2v3h3z"/></svg>
                      {% elif 'group' in n or 'permission' in n %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.89 1.97 1.74 1.97 2.95V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                      {% else %}
                        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6z"/></svg>
                      {% endif %}
                    {% endwith %}
                  </span>
                  <span class="menu-text">{{ model.name }}</span>
                </a>
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    {% endif %}
  </ul>

  <div class="sidebar-footer">
    <button type="button" class="collapse-btn" aria-label="Collapse sidebar">«</button>
  </div>
  <script>
    (function(){
      function r(f){if(document.readyState!=='loading'){f();}else{document.addEventListener('DOMContentLoaded',f);} }
      r(function(){
        var i=document.getElementById('nav-filter');
        var list=document.getElementById('nav-sidebar-models');
        if(!i||!list) return;
        i.addEventListener('input',function(){
          var q=i.value.toLowerCase();
          var items=list.querySelectorAll('.menu-item');
          items.forEach(function(li){
            var t=li.textContent.toLowerCase();
            li.style.display = t.indexOf(q)>-1 ? '' : 'none';
          });
        });
      });
    })();
  </script>
</nav>
